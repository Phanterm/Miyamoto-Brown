//Enemy behavior:
/*
TO ADD LATER
*/

{
id: "knife_thug",
editor_info: {category: "enemies",
//var is treated like vars, but is able to be changed in the editor
var: [
		{
			name: "x_bound",
			type: "x",
			value: "x-100",
		},{
			name: "x2_bound",
			type: "x",
			value: "x+150",
		},{
			name: "y_bound",
			type: "y",
			value: "y-100",
		},{
			name: "y2_bound",
			type: "y",
			value: "y+150",
		},
	],
},
prototype: ["enemy_ground"],

"hitpoints": 3,

//vars are built in variables that aren't modified by the editor
vars:{
	last_triggered: -400,
	triggered: false,
	
	},




on_create: "set(animation, 'idle')", //It doesn't activate until within range of the player

//on the idle animation, it can branch depending on if the enemy has been triggered or not. 
on_end_idle_anim: "[
		if(not vars.triggered, 
			set(animation, 'idle')), 
		if(vars.triggered, 
			set(animation, 'triggered'))]",

//First, we are going to check to see if the player has walked into our midsts.
//if it has, then we call the "triggered" function
on_process: "[ 
	if(not vars.triggered and  level.player.midpoint_x > vars.x_bound and level.player.midpoint_x < vars.x2_bound  and level.player.midpoint_y > vars.y_bound and level.player.midpoint_y < vars.y2_bound and cycle - vars.last_triggered > 250, 
		[fire_event('triggered'),set(vars.last_triggered,cycle)]
	),
]",

on_triggered: "[
	debug('knife thug has been triggered'),
	//by setting the trigger status to true, we can activate the enemy animation. See on process for details
	set(triggered, true),

]",

properties: {},

	animation: [
	{"@base": true,
		image: "enemies/knifethug.png",
		solid_area: [8, 5, 26, 32],		
		pad: 3,
		accel_y: 40,
	},
	{
		id: "walk",
		rect: [1, 37, 32, 69],	
		body_area:"all",
		frames: 2,
		duration: 10,
		"damage": 2,	
		},
	{
		id: "idle",
		rect: [1, 1, 32, 33],	
		body_area:"all",
		frames: 2,
		duration: 10,
		"damage": 2,	
		},
	{
		id: "triggered",
		rect: [71, 1, 102, 33],	
		body_area:"all",
		frames: 1,
		duration: 20,
		"damage": 2,	
		},
	{
		id: "knockback",
		rect: [71, 37, 102, 69],	
		body_area:"all",
		frames: 1,
		duration: 5,
		"damage": 2,	
		},
		],

}